{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\otoProject\\\\workspace\\\\otoloka-mobile-forum\\\\pages\\\\detail\\\\index.tsx\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _catch(body, recover) {\n  try {\n    var result = body();\n  } catch (e) {\n    return recover(e);\n  }\n\n  if (result && result.then) {\n    return result.then(void 0, recover);\n  }\n\n  return result;\n}\n\nimport React, { useState, useRef, useEffect, useContext } from 'react';\nimport styles from './index.module.scss';\nimport { useRouter } from 'next/router';\nimport { useObserver, MobXProviderContext } from 'mobx-react';\nimport DetailItem from '../../components/detail-item';\nimport Like from '../../static/images/like.svg';\nimport Liked from '../../static/images/liked.svg';\nimport CommentItem from '../../components/comment-item';\nimport emptyKomentar from '../../static/images/empty.svg';\nimport DetailItemImageList from '../../components/detail-item-image-list';\nimport ImageViewModal from '../../components/image-view-modal';\nimport { CommentInputSubject } from '../../subject/comment';\nimport DetailService from '../../services/detail';\nimport useMessageBox from '../../hooks/messageBoxHooks';\nimport Report from '../../components/report';\nimport ScrollContainer from '../../components/scroll-container';\nimport Head from 'next/head';\nimport { getUrlParameters } from '../../util';\n\nconst DetailPage = ({\n  articleData,\n  articleId,\n  path,\n  documentTitle,\n  description,\n  keyword,\n  urls,\n  messageNums,\n  shareNums,\n  supportNums\n}) => {\n  const pageSize = 10;\n  const defaultInputHeight = 35;\n  const router = useRouter();\n  const {\n    store\n  } = useContext(MobXProviderContext);\n  const {\n    user\n  } = useObserver(() => ({\n    user: store.user\n  }));\n  const {\n    0: commentList,\n    1: setCommentList\n  } = useState([]);\n  const {\n    0: isLoaded,\n    1: setIsLoaded\n  } = useState(false);\n  const {\n    0: commentPlaceHolderText,\n    1: setCommentPlaceHolder\n  } = useState('Isi Thread ...');\n  const {\n    0: imageList,\n    1: setImageList\n  } = useState(urls || []);\n  const {\n    0: showImageModal,\n    1: setShowImageModal\n  } = useState(false);\n  const {\n    0: isFocus,\n    1: setIsFocus\n  } = useState(false);\n  const {\n    0: autoContentHeight,\n    1: setAutoContentHeight\n  } = useState(defaultInputHeight);\n  const textareaContainerElement = useRef();\n  const {\n    0: inputValue,\n    1: setInputValue\n  } = useState('');\n  const {\n    0: curSupportNums,\n    1: setCurSupportNums\n  } = useState(supportNums);\n  const messageNumsRef = useRef(messageNums);\n  const shareNumsRef = useRef(shareNums);\n  const {\n    0: supportFlag,\n    1: setSupportFlag\n  } = useState(false);\n  const {\n    0: isReply,\n    1: setIsReply\n  } = useState(false);\n  const beReplyData = useRef();\n  const isCommentSubmit = useRef(false);\n  const isLikeSubmit = useRef(true);\n  const showMessageBox = useMessageBox();\n  const service = new DetailService();\n  const {\n    0: isApp,\n    1: setIsApp\n  } = useState(true);\n  const {\n    0: reportModal,\n    1: setReportModal\n  } = useState(false);\n  const {\n    0: reportOptionList,\n    1: setReportOptionList\n  } = useState([]);\n  const {\n    0: scrollY,\n    1: setScrollY\n  } = useState(0);\n  useEffect(() => {\n    if (!!user && user.userId > -1) {\n      getSupportFlag();\n    }\n  }, [user]);\n  useEffect(() => {\n    const isApp = !!window.ReactNativeWebView;\n    setIsApp(isApp);\n    getCommentData();\n    const args = getUrlParameters('scrollToComment');\n    let timer;\n\n    if (eval(args)) {\n      timer = setTimeout(() => {\n        const top = document.getElementById('comment').getBoundingClientRect().y; // console.log(top);\n        // setScrollY(-top);\n      }, 1000);\n    }\n\n    service.getReportOptionList().then(res => {\n      setReportOptionList(res);\n    });\n    const commentSubscription = CommentInputSubject.subscribe(({\n      action,\n      messageData\n    }) => {\n      if (action === 'reply') {\n        setCommentPlaceHolder('Balas ' + messageData.messageUserName);\n        setIsFocus(true);\n        setIsReply(true);\n        textareaContainerElement.current.focus();\n        beReplyData.current = messageData;\n      } else if (action === 'delete-comment') {\n        setIsFocus(false);\n        deleteComment(messageData.id, messageData.content);\n      } else if (action === 'delete-reply') {\n        setIsFocus(false);\n      }\n    });\n    return () => {\n      clearTimeout(timer);\n      commentSubscription.unsubscribe();\n    };\n  }, []);\n\n  const getSupportFlag = () => {\n    service.querySupportFlag(articleId).then(resp => {\n      setSupportFlag(resp);\n      isLikeSubmit.current = false;\n    });\n  };\n\n  const getCommentData = () => {\n    return service.getFirstMessagesList(articleId, 1, 10).then(({\n      total,\n      list\n    }) => {\n      setCommentList(list);\n      setIsLoaded(true);\n    });\n  };\n\n  const handleSubmitComment = () => {\n    if (!user || user.userId <= 0 || !localStorage.getItem('token')) {\n      store.showLoginModal();\n      return;\n    }\n\n    if (!inputValue) {\n      showMessageBox('error', 'error', 'Komentar is kosong!');\n      return;\n    }\n\n    if (isCommentSubmit.current === false) {\n      isCommentSubmit.current = true;\n      let submitModel;\n\n      if (isReply) {\n        submitModel = {\n          articleId: articleId,\n          content: inputValue,\n          messageUserid: user.userId,\n          parentMessageId: beReplyData.current.parentMessageId,\n          parentMessageUserid: beReplyData.current.parentMessageUserid,\n          beMessageUserid: beReplyData.current.messageUserid\n        };\n      } else {\n        submitModel = {\n          articleId: articleId,\n          content: inputValue,\n          messageUserid: user.userId\n        };\n      }\n\n      service.leavingMessage(submitModel).then(result => {\n        isCommentSubmit.current = false;\n        setInputValue('');\n        let count = Number(messageNumsRef.current) + 1;\n        messageNumsRef.current = count.toString();\n        result.messageUserHeadUrl = user.headPortrait;\n        result.messageUserName = user.nickname;\n\n        if (isReply) {\n          textareaContainerElement.current.blur();\n          showMessageBox('success', 'success', 'Berhasil balas!');\n          result.beMessageUserName = beReplyData.current.messageUserName;\n          CommentInputSubject.next({\n            action: 'refresh-reply',\n            messageData: result\n          }); //刷新二级评论列表\n        } else {\n          textareaContainerElement.current.blur();\n          showMessageBox('success', 'success', 'Komentar berhasil!');\n          addComment(result);\n        }\n\n        setAutoContentHeight(defaultInputHeight);\n        setIsReply(false);\n        setIsFocus(false);\n      }).catch(error => {\n        console.error(error);\n        isCommentSubmit.current = false;\n        showMessageBox('error', 'error', error.message || 'Komentar gagal！');\n      });\n    }\n  }; //新增一条评论\n\n\n  const addComment = commentItem => {\n    setCommentList(commentList => [...commentList, commentItem]);\n  }; //删除评论\n\n\n  const deleteComment = (commentId, content) => {\n    setCommentList(commentList => commentList.filter(item => {\n      if (item.id === commentId) {\n        item.content = content;\n        item.status = 2;\n        return item;\n      } else {\n        return item;\n      }\n    }));\n  };\n\n  const toCommentList = () => {\n    if (isApp) {\n      window.ReactNativeWebView.postMessage(JSON.stringify({\n        action: 'gotoCommentList',\n        data: {\n          articleId\n        }\n      }));\n    } else {\n      router.push(`/forum/comment/${articleId}`);\n    }\n  };\n\n  const handleShowImageModal = imageItem => {\n    setImageList(imageList => imageList.map(item => {\n      item.active = item.url === imageItem.url;\n      return item;\n    }));\n    setShowImageModal(true);\n  };\n\n  const handleCloseImageModal = () => {\n    setShowImageModal(false);\n  };\n\n  const handleInputFocus = () => {\n    if (!user || user.userId <= 0 || !localStorage.getItem('token')) {\n      textareaContainerElement.current.blur();\n      store.showLoginModal();\n      return;\n    }\n\n    setIsFocus(true);\n  };\n\n  const handleInputBlur = () => {\n    setIsFocus(false);\n    setCommentPlaceHolder('Isi Thread ...');\n  };\n\n  const handelValueChange = event => {\n    const {\n      target\n    } = event;\n    let {\n      value\n    } = target;\n    setInputValue(value);\n    const scrollHeight = textareaContainerElement.current.scrollHeight;\n    setAutoContentHeight(scrollHeight);\n  };\n\n  const handelKeyDown = event => {\n    if (event.keyCode == 13) {\n      handleSubmitComment();\n      event.preventDefault();\n      return false;\n    }\n  };\n\n  const handelLikeIt = () => {\n    if (!user || user.userId <= 0 || !localStorage.getItem('token')) {\n      store.showLoginModal();\n    } else {\n      if (isLikeSubmit.current === false) {\n        isLikeSubmit.current = true;\n        service.updateArticleLike(articleId).then(resp => {\n          isLikeSubmit.current = false;\n\n          if (supportFlag) {\n            setSupportFlag(false);\n            countSupportNum(-1);\n          } else {\n            setSupportFlag(true);\n            countSupportNum(1);\n          }\n        }).catch(error => {\n          console.error(error);\n          isLikeSubmit.current = false;\n          showMessageBox('error', 'error', 'Like gagal!');\n        });\n      }\n    }\n  };\n\n  const countSupportNum = plus => {\n    let num = Number(curSupportNums) + plus;\n\n    if (num > 999) {\n      num = '999+';\n    }\n\n    setCurSupportNums(num);\n  };\n\n  const backToIndex = () => {\n    if (isApp) {\n      window.ReactNativeWebView.postMessage(JSON.stringify({\n        action: 'goBack'\n      }));\n    } else {\n      router.push('/');\n    }\n  };\n\n  const closeReportModal = () => {\n    setReportModal(false);\n  };\n\n  const handleClickReport = () => {\n    if (!user || user.userId <= 0 || !localStorage.getItem('token')) {\n      store.showLoginModal();\n      return;\n    }\n\n    setReportModal(true);\n  };\n\n  const handleClickShare = () => {\n    if (isApp) {\n      window.ReactNativeWebView.postMessage(JSON.stringify({\n        action: 'share',\n        data: {\n          articleId: articleId\n        }\n      }));\n      service.updateArticleShareNums(articleId).then(resp => {\n        console.log('分享成功');\n      }).catch(error => {\n        console.error(error);\n        showMessageBox('error', 'error', 'Gagal dibagikan!');\n      });\n    }\n\n    countShareNum(1);\n  };\n\n  const countShareNum = plus => {\n    if (shareNumsRef.current !== '999+') {\n      let num = Number(shareNumsRef.current) + plus;\n\n      if (num > 999) {\n        num = '999+';\n      }\n\n      shareNumsRef.current = num;\n    }\n  };\n\n  const handlePullDownRefresh = () => {\n    return getCommentData();\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 7\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 417,\n      columnNumber: 9\n    }\n  }, documentTitle), __jsx(\"meta\", {\n    property: \"og:url\",\n    content: path,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"og:type\",\n    content: \"article\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"og:site_name\",\n    content: \"OTOLOKA\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"fb:admins\",\n    content: \"max.oto.967\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"og:title\",\n    content: documentTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"og:description\",\n    content: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"twitter:card\",\n    content: \"summary_large_image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"twitter:site\",\n    content: \"@otoloka_id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 425,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"twitter:creator\",\n    content: \"@otoloka_id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"twitter:url\",\n    content: path,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"twitter:title\",\n    content: documentTitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    property: \"twitter:description\",\n    content: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"description\",\n    content: description,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"keywords\",\n    content: keyword,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"author\",\n    content: \"Otoloka\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 9\n    }\n  }), __jsx(\"meta\", {\n    name: \"language\",\n    content: \"id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 9\n    }\n  }), __jsx(\"link\", {\n    rel: \"canonical\",\n    href: path,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 9\n    }\n  })), __jsx(\"div\", {\n    className: styles['detail-page-container'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles['detail-header'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    onClick: backToIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 11\n    }\n  }, __jsx(\"span\", {\n    className: `icon-font uniE906 ${styles['icon-close']}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: styles['handel-container'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: styles['report-container'],\n    onClick: handleClickReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"icon-font uniE90F\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: styles['share-container'],\n    onClick: handleClickShare,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 451,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    className: \"icon-font uniE900\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 15\n    }\n  })))), __jsx(\"div\", {\n    className: styles['detail-container'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 9\n    }\n  }, __jsx(ScrollContainer, {\n    onPullDown: handlePullDownRefresh,\n    y: scrollY,\n    pullUp: false,\n    observeDOM: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: styles['detail-content'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 13\n    }\n  }, __jsx(DetailItem, {\n    data: articleData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    className: styles['image-list'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 15\n    }\n  }, imageList.length > 0 ? __jsx(DetailItemImageList, {\n    imageList: imageList,\n    onClickImgItem: handleShowImageModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 19\n    }\n  }) : null)), __jsx(\"div\", {\n    className: styles['split-underline'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 478,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: styles['detail-comment'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 479,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: styles['detail-comment-header'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: styles['comment-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 17\n    }\n  }, \"Komentar\", __jsx(\"span\", {\n    className: styles['count'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 483,\n      columnNumber: 19\n    }\n  }, \"(\", messageNumsRef.current, \")\")), isLoaded && commentList.length > 0 ? __jsx(\"div\", {\n    className: styles['comment-all'],\n    onClick: toCommentList,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 19\n    }\n  }, \"Lihat semua\") : null), __jsx(\"div\", {\n    className: styles['comment-wrapper'],\n    id: \"comment\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 15\n    }\n  }, __jsx(\"ul\", {\n    className: styles['comment-list-content'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 17\n    }\n  }, commentList.map((item, index) => __jsx(\"li\", {\n    className: styles['comment-item'],\n    key: item ? item.id + 99899 : index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 21\n    }\n  }, __jsx(CommentItem, {\n    data: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 23\n    }\n  })))), commentList.length === 0 && isLoaded ? __jsx(\"div\", {\n    className: styles['empty-comment'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 19\n    }\n  }, __jsx(\"img\", {\n    src: emptyKomentar,\n    className: styles['empty-img'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    className: styles['no-comment'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 21\n    }\n  }, \"Jadilah orang pertama yang berkomentar.\")) : null)))), __jsx(\"div\", {\n    className: styles['comment-footer'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 9\n    }\n  }, __jsx(\"textarea\", {\n    ref: textareaContainerElement,\n    className: `${styles['comment-input']} ${isFocus ? styles['is-focus'] : ''}`,\n    onFocus: handleInputFocus,\n    onBlur: handleInputBlur,\n    style: {\n      height: autoContentHeight\n    },\n    onChange: handelValueChange,\n    value: inputValue,\n    onKeyDown: handelKeyDown,\n    placeholder: commentPlaceHolderText,\n    maxLength: 2000,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 522,\n      columnNumber: 11\n    }\n  }), isFocus ? null : articleData ? __jsx(\"div\", {\n    className: styles['like-it'],\n    onClick: handelLikeIt,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: styles['interaction-icon'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 15\n    }\n  }, supportFlag ? __jsx(\"img\", {\n    src: Liked,\n    alt: \"like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 19\n    }\n  }) : __jsx(\"img\", {\n    src: Like,\n    alt: \"like\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 542,\n      columnNumber: 21\n    }\n  })), __jsx(\"span\", {\n    className: styles['interaction-count'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 15\n    }\n  }, curSupportNums)) : null)), showImageModal ? __jsx(ImageViewModal, {\n    imageList: imageList,\n    onClose: handleCloseImageModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 9\n    }\n  }) : null, reportModal ? __jsx(Report, {\n    optionList: reportOptionList,\n    articleId: articleId,\n    show: reportModal,\n    onClose: closeReportModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 559,\n      columnNumber: 9\n    }\n  }) : null);\n};\n\nDetailPage.getInitialProps = function ({\n  query,\n  res\n}) {\n  try {\n    const {\n      id\n    } = query;\n    const articleId = id + '';\n    const service = new DetailService();\n    return Promise.resolve(_catch(function () {\n      return Promise.resolve(service.queryArticleDetails(articleId)).then(function (articleDetail) {\n        if (articleDetail.code === 9990) {\n          return _objectSpread({}, query, {\n            code: articleDetail.code\n          });\n        }\n\n        articleDetail.documentTitle = articleDetail.title;\n        return _objectSpread({}, query, {}, articleDetail, {\n          articleData: articleDetail\n        });\n      });\n    }, function (error) {\n      if (res) {\n        res.statusCode = 404;\n      }\n\n      throw error;\n    }));\n  } catch (e) {\n    return Promise.reject(e);\n  }\n};\n\nexport default DetailPage;","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"D:\\\\otoProject\\\\workspace\\\\otoloka-mobile-forum\\\\components\\\\comment-reply-item\\\\index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport './index.scss';\nimport { useObserver, MobXProviderContext } from 'mobx-react';\nimport UserAvatar from '../user-avatar';\nimport { CommentInputSubject } from '../../subject/comment';\nimport { Toast, Modal } from 'antd-mobile';\nimport DetailService from '../../services/detail';\n\nconst CommentReplyItem = ({\n  data,\n  parentMessageUserid,\n  parentMessageId\n}) => {\n  const {\n    store\n  } = useContext(MobXProviderContext);\n  const {\n    user\n  } = useObserver(() => ({\n    user: store.user\n  }));\n  const service = new DetailService();\n\n  const handelReply = () => {\n    //发送输入框获焦事件\n    data.parentMessageUserid = parentMessageUserid;\n    data.parentMessageId = parentMessageId;\n    CommentInputSubject.next({\n      action: 'reply',\n      messageData: data\n    });\n  };\n\n  const handelDelete = () => {\n    Modal.alert('Yakin mau hapus?', 'Hapus', [{\n      text: 'Tidak',\n      onPress: () => {},\n      style: 'cancel'\n    }, {\n      text: 'Ya, keluar',\n      onPress: () => {\n        service.deleteMessage(data.id).then(resp => {\n          Toast.success('Berhasil menghapus!', 1);\n          resp.parentMessageId = parentMessageId;\n          CommentInputSubject.next({\n            action: 'delete-reply',\n            messageData: resp\n          }); //刷新二级评论列表\n        }).catch(error => {\n          console.error(error);\n          Toast.success('Gagal menghapus', 2);\n        });\n      }\n    }]);\n  };\n\n  return __jsx(\"div\", {\n    className: \"comment-reply-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"replay-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  }, __jsx(\"ul\", {\n    className: \"replay-message-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 9\n    }\n  }, __jsx(\"li\", {\n    className: \"replay-list-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"replay-item-avator\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  }, __jsx(UserAvatar, {\n    size: 0.24,\n    src: data.messageUserHeadUrl,\n    isAuthor: data.messageUserid === data.articleUserId,\n    small: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"replay-item-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"replay-item-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"replay-users\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, data.messageUserName, \" \", __jsx(\"span\", {\n    className: \"replay-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 42\n    }\n  }, \"Balas\"), \" \", data.beMessageUserName), __jsx(\"div\", {\n    className: \"replay-body\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, data.content)), __jsx(\"div\", {\n    className: \"message-operation\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, __jsx(\"div\", {\n    className: \"release-time\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, data.createTime), user && user.userId != data.messageUserid ? __jsx(\"div\", {\n    className: \"reply\",\n    onClick: handelReply,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 62\n    }\n  }, \"Balas\") : null, user && user.userId === data.messageUserid && data.status === 1 ? __jsx(\"div\", {\n    className: \"delete\",\n    onClick: handelDelete,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 84\n    }\n  }, \"Hapus\") : null))))));\n};\n\nexport default CommentReplyItem;","map":null,"metadata":{},"sourceType":"module"}
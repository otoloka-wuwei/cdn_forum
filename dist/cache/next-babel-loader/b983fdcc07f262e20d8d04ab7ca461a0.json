{"ast":null,"code":"var _jsxFileName = \"D:\\\\otoProject\\\\workspace\\\\otoloka-mobile-forum\\\\components\\\\comment-input\\\\index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useRef } from 'react';\nimport styles from './index.module.scss';\nimport { CommentInputSubject } from '../../subject/comment';\n\nconst CommentInput = ({\n  inputText,\n  isFocused,\n  placeHolder,\n  onSubmit\n}) => {\n  const defaultInputHeight = 35;\n  const textareaContainerElement = useRef();\n  const commentPlaceHolderText = useRef(placeHolder);\n  const {\n    0: isFocus,\n    1: setIsFocus\n  } = useState(isFocused);\n  const {\n    0: autoContentHeight,\n    1: setAutoContentHeight\n  } = useState(defaultInputHeight);\n  const {\n    0: inputValue,\n    1: setInputValue\n  } = useState(inputText);\n\n  const handelValueChange = event => {\n    const {\n      value\n    } = event.target;\n    setInputValue(value);\n    const scrollHeight = textareaContainerElement.current.scrollHeight;\n    setAutoContentHeight(scrollHeight);\n  };\n\n  const handleInputFocus = () => {\n    setIsFocus(true);\n  };\n\n  const handleInputBlur = () => {\n    CommentInputSubject.next({\n      action: 'blur'\n    });\n    setIsFocus(false);\n  };\n\n  const handelKeyDown = event => {\n    if (event.keyCode == 13) {\n      handleSubmitComment();\n      event.preventDefault();\n      return false;\n    }\n  };\n\n  const handleSubmitComment = () => {\n    if (typeof onSubmit === \"function\") {\n      onSubmit({\n        detail: inputValue\n      });\n    }\n\n    setAutoContentHeight(defaultInputHeight);\n  };\n\n  return __jsx(\"div\", {\n    className: styles['comment-input-component'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, __jsx(\"textarea\", {\n    ref: textareaContainerElement,\n    autoFocus: true,\n    className: `${styles['comment-input']} ${isFocus ? styles['is-focus'] : ''}`,\n    onFocus: handleInputFocus,\n    onBlur: handleInputBlur,\n    style: {\n      height: autoContentHeight\n    },\n    onChange: handelValueChange,\n    value: inputValue,\n    onKeyDown: handelKeyDown,\n    maxLength: 2000,\n    placeholder: commentPlaceHolderText.current,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default CommentInput;","map":null,"metadata":{},"sourceType":"module"}
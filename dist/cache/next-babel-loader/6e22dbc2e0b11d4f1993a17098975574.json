{"ast":null,"code":"var _jsxFileName = \"D:\\\\otoProject\\\\workspace\\\\otoloka-mobile-forum\\\\components\\\\report\\\\index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useState, useRef } from 'react';\nimport styles from './index.module.scss';\nimport RadioGroup from '../radio-group';\nimport { Modal } from 'antd-mobile';\nimport DetailPageService from '../../services/detail';\nimport useMessageBox from '../../hooks/messageBoxHooks';\n\nconst Report = ({\n  optionList,\n  articleId,\n  show,\n  onClose\n}) => {\n  const {\n    0: reportValue,\n    1: setRepoetValue\n  } = useState(-1);\n  const {\n    0: reportOptionList\n  } = useState(optionList);\n  const {\n    0: reportCommentText,\n    1: setReportCommentText\n  } = useState('');\n  const isSubmit = useRef(false);\n  const showMessageBox = useMessageBox();\n\n  const onReportRadioChange = ({\n    detail: value\n  }) => {\n    setRepoetValue(value);\n\n    if (value !== 6) {\n      setReportCommentText('');\n    }\n  };\n\n  const service = new DetailPageService();\n\n  const canSubmit = () => {\n    if (reportValue < 0) {\n      return false;\n    }\n\n    if (reportValue === 6 && !reportCommentText) {\n      return false;\n    }\n\n    return true;\n  };\n\n  const handleSubmitReport = () => {\n    if (isSubmit.current === false && canSubmit() === true) {\n      isSubmit.current = true;\n      service.submitReport(reportValue, articleId, reportCommentText).then(() => {\n        onClose();\n        isSubmit.current = false;\n        showMessageBox('success', 'Sukses', 'Berhasil lapor, terima kasih!');\n      }).catch(error => {\n        isSubmit.current = false;\n        console.error(error);\n        showMessageBox('error', 'error', 'Error!');\n      });\n    }\n  };\n\n  const handleReportCommentTextChange = event => {\n    const {\n      value\n    } = event.target;\n    setReportCommentText(value || '');\n  };\n\n  const onCloseReport = () => {\n    onClose();\n  };\n\n  return __jsx(Modal, {\n    transparent: false,\n    visible: show,\n    animationType: \"slide-up\",\n    onClose: onCloseReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: styles['report-component'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles['header'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    className: \"icon-font uniE906\",\n    onClick: onCloseReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }), __jsx(\"span\", {\n    className: `${styles['submit-button']} ${canSubmit() === true ? '' : styles['disabled']}`,\n    onClick: handleSubmitReport,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }, \"Submit\")), __jsx(\"div\", {\n    className: styles['report-container'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: styles['report-title'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  }, \"Dengan alasan\"), __jsx(\"div\", {\n    className: styles['radio-container'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: styles['radio-group-container'],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, __jsx(RadioGroup, {\n    itemClass: styles['radio-group-item'],\n    value: reportValue,\n    options: reportOptionList,\n    onChange: onReportRadioChange,\n    direction: 'column',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  })), reportValue === 6 ? __jsx(\"textarea\", {\n    disabled: reportValue !== 6,\n    minLength: 10,\n    maxLength: 300,\n    className: styles['report-input'],\n    onChange: handleReportCommentTextChange,\n    placeholder: \"Berikan kami masukan\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 15\n    }\n  }) : null))));\n};\n\nexport default Report;","map":null,"metadata":{},"sourceType":"module"}